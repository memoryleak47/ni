# @.arg.{obj: Object, attr: string}
# TODO does this need to be a function?
# isn't an actual proc enough?
proc py_attrlookup {
    @.ret = @.arg.obj.dict[@.arg.attr];
    %jmptab = {};
    %jmptab[@.ret] = pop_stack;
    %jmptab[Undef] = py_type_attrlookup;
    jmp %jmptab[@.ret];
}

# @.arg.{obj: Object, attr: string}
proc py_type_attrlookup {
    @.ret = @.arg.obj.type.dict[@.arg.attr];
    jmp pop_stack;
}
